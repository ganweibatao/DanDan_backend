艾宾浩斯计划图的逻辑


"""创建新学习计划或更新现有计划"""
"""获取当前登录用户的学习计划"""

一。在用户完成学习或复习时，自动安排下一次的复习任务
需要遵循艾宾浩斯遗忘曲线的间隔规律 (1, 2, 4, 7, 15 天)。
1. 当一个 LearningUnit 被首次标记为已学习 (is_learned = True) 时，需要创建第一个复习任务 (UnitReview)，复习日期定在1天后。
2. 当一个 UnitReview 被标记为已完成 (is_completed = True) 时，需要根据当前的复习次数 (review_order) 来创建下一个复习任务，间隔分别为2天、4天、7天、15天。当完成第5次复习（对应15天间隔）后，就不再创建新的复习任务。

二。获取今日新学习单元和复习单元的逻辑。
1. 找到当前用户激活的学习计划 (LearningPlan)。
2. 在该计划中，找到 unit_number 最大的已学习 (is_learned=True) 的学习单元 (LearningUnit)。
3. 如果找到了已学习单元，那么今天要学习的新单元就是该单元之后的下一个单元（按 unit_number 排序）。
4. 如果没有找到任何已学习单元（即用户刚开始计划），那么今天要学习的新单元就是序号为 1 的单元。
5. 直接查询 UnitReview 模型，找到属于 active_plan、计划复习日期为今天 (review_date=today) 且尚未完成 (is_completed=False) 的复习任务。
