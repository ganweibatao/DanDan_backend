词汇书系统设计说明文档

1. 简介
   这个系统设计用于管理不同类型的词汇书（如四级、六级、雅思等）

2. 数据模型设计解释

   2.1 词汇书 (VocabularyBook)
       比如《四级词汇》、《雅思词汇》等。这个模型就是用来存储这些书的基本信息：
       - 书名是什么
       - 书的词汇量
       - 标记是否为系统预设书籍

   2.2 单词基本信息 (WordBasic)
       这个模型存储单词的基本信息，避免重复存储：
       - 单词拼写
       - 音标
       - 英式发音URL
       - 美式发音URL

   2.3 词汇书单词 (BookWord)
       这个模型存储单词在特定词汇书中的信息：
       - 关联的词汇书ID
       - 关联的单词基本信息ID
       - 单词在书中的顺序
       - 词性及中文释义（JSON格式，支持多词性）
       - 单词的例句
       - 单词的难度级别

       关于发音字段的说明:

       虽然目前计划使用阿里云API实时生成发音，但为了系统的扩展性和未来可能的需求变化，我们在数据库中预留了发音相关字段：

       当前发音实现方案：
       - 系统将通过阿里云TTS API实时生成单词发音
       - 不存储音频文件，每次请求时动态合成
       - 发音字段会保留，但暂时不使用

       这种设计既满足了当前的需求，又为未来可能的变化（如预存储常用单词发音）预留了空间。优先调用阿里云，后期可能会有存储需求。

       **保持与实体书一致的单词顺序**：
       系统会严格按照实体书籍中的单词顺序来排列单词，这一点非常重要。
       每个BookWord记录会包含一个order字段，用于保证单词按照书中的原始顺序排列。
       在数据导入过程中，系统可以自动为每个导入的单词分配递增的顺序值
       例如：按照导入顺序依次设置 order 值为 1, 2, 3, 4...

       对于同一本书的不同版本，例如《四级词汇》有第5版和第6版，可以创建不同的VocabularyBook记录，各自保持其特定版本的单词顺序。

3. 数据关系图解

   用户 → 选择词汇书 → 学习单词
   /students页面用户选择词汇书籍，设定每日学习词汇数量，更新数据到learning_units表；
   用户/memorize页面完成当日的学习目标，如果已经完成新list，更新unit_reviews表；

4. 系统优势

   1. 避免重复：每个单词的基本信息只存储一次。
   2. 灵活性：同一个单词在不同词汇书中可以有不同的释义和重要性。
   3. 多词性支持：一个单词可以有多个词性，每个词性有自己的释义和例句。
   4. 性能优化：通过合理的索引设计，保证系统在数据量大时仍然运行流畅。
   5. 动态发音：实时生成单词发音，不需要预存储大量音频文件。
   6. 与实体书一致：保持与纸质书籍相同的单词顺序，便于结合线下学习。
   7. 未来扩展：预留字段设计考虑了未来可能的功能扩展，不会因需求变化而大幅改动数据结构。

5. 实际应用场景举例

   小明是一名大学生，准备考四级：
   1. 他选择了"四级词汇"这本书（VocabularyBook）
   3. 他开始学习单词
   4. 当他学习单词"apple"时，系统会显示这个单词在四级词汇书中的释义和例句（来自BookWord）
   5. 这个单词在系统中的顺序与他手中的四级词汇书完全一致，他可以同时参考纸质书
   6. 当他点击发音按钮时，系统实时调用阿里云TTS API生成并播放该单词的发音

   小红是一名高中生，准备雅思考试，她可以选择"雅思词汇"这本书，走同样的流程，但看到的单词释义和学习顺序会不同。

6. 数据导入和维护

   为了确保系统中的词汇书内容与实体书籍保持一致，我们需要建立一套严格的数据导入和维护流程：
   1. 初始数据导入：根据实体书籍的内容，按照原书的单词顺序进行数据录入
   2. 版本管理：对于同一本词汇书的不同版本或改版，创建新的词汇书记录而不是修改原记录
   3. 校对流程：建立多重校对机制，确保系统中的内容与实体书籍完全一致
   5. 用户反馈机制：允许用户报告内容与实体书不一致的问题，及时更正

7. JSON数据格式示例

   对于单词的词性和释义，我们使用JSON格式存储，例如：

   ```json
   [
     {
       "pos": "n.",
       "meaning": "苹果；苹果树"
     },
     {
       "pos": "v.",
       "meaning": "使成苹果状"
     }
   ]
   ```

   这种格式的优点是：
   1. 支持一个单词有多个词性
   2. 每个词性可以有自己的释义
   3. 数据结构清晰，易于前端解析和展示
   4. 支持PostgreSQL和MySQL等主流数据库的JSON查询功能
